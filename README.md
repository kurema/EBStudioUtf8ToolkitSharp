# EBStudioUtf8ToolkitSharp
## 使い方
```
FontDumpK.exe フォント名 変換元HTML 変換先HTML [-map=<Unicodeマップの出力先>] [-descent=<true/false>]
```
UTF8形式のEBStudio用HTMLからShift_JIS形式のHTMLを外字フォントとセットで出力するツールです。
外字フォントファイルはGaiji.xml、外字置換定義ファイルはGaijiMap.xmlに保存されます。

| オプション | 値 |
|-----------|------------|
| -map | EBシリーズ用Unicodeマップの出力先。省略した場合は出力されません。 |
| -descent | falseの場合は大きめに文字が出力されます。 ただし一部の文字がはみ出ます。 |

## 使い方
1. ダウンロード・展開し、binary/内にutf8.htmlを配置。
2. Convert.batを実行。
3. テーブルを画像に変換する場合はmain.img.html・しない場合はmain.html、さらにGaiji.xml、GaijiMap.xmlをebsutdioで設定。
4. 変換し、map.mapを適切な場所に配置。

## 問題点
1. 外字フォントファイルの内32X30,16X30サイズは出力されません。EBStudioに入力すると期待通りの結果にならないからです。
2. "～"が外字扱いになります。
3. 文字が少し小さく出力されます。これは"Ç"や"Á"のような文字に一貫して対応するためです。
4. 代替文字が少し適当です。また設定を埋め込んでいるのでソースコードの変更なしに変更はできません。
5. サロゲートペアを構成する文字の動作はいささか怪しいです。
6. 全体的に雑です。

## オリジナルのFontDumpWとの比較
1. まず、このツールはUTF8のHTMLファイルを簡単に取り込む事を目的としています。オリジナルのFontDumpWとは性質が違います。
2. フォント出力の際にサイズと位置の自動調整を行っています。また全角・半角も同様に自動で調整されます。
3. 一方で副作用として文字が少し小さくなります。一部の文字はつぶれてしまいます。これはUnicodeで想定される文字の殆どをはみ出さず、また表示を一貫させるためです。
4. オリジナルのFontDumpWではなぜか48x48サイズの文字の下側が壊れていましたが、こちらでは修正されています。
5. 他の形式からの変換・bmpでの出力機能はありません。
